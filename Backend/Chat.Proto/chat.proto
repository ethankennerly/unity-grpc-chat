syntax = "proto3";
option csharp_namespace = "Chat.Proto";
package chat;

message SendMessageRequest {
  string sender = 1;
  string text = 2;
}

message SendMessageAck {
  int64 id         = 1;
  int64 created_at = 2; // epoch ms
}

message ChatMessage {
  int64 id         = 1;
  int64 created_at = 2; // epoch ms
  string sender    = 3;
  string text      = 4;
}

message StreamRequest {
  int64 sinceId = 1;
}

service ChatService {
  rpc SendMessage (SendMessageRequest) returns (SendMessageAck);
  rpc StreamMessages (StreamRequest) returns (stream ChatMessage);
}
